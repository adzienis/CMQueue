

<%= simple_form_for question,
                    html: {
                      class: "w-100", id: dom_id(question),
                      data: { controller: "form" },
                      autocomplete: "off"
                    },
                    defaults: {
                      wrapper_html: { class: "mb-2" },
                      label_html: { class: "fw-bold" }
                    } do |f| %>
  <%= f.full_error :course, class: "invalid-feedback d-block fw-bold", style: "font-size: 1rem" %>
  <%= f.full_error :enrollment, class: "invalid-feedback d-block fw-bold", style: "font-size: 1rem"  %>
  <%= f.hidden_field :enrollment_id, value: question.enrollment.id %>
  <%= f.hidden_field :course_id, value: question.course.id %>
  <%= f.input :tried, label: "What have you tried?", input_html: { value: question.tried } %>
  <%= f.input :description, label: "Description" %>
  <%= f.input :location, label: "Zoom Link" %>

  <div data-controller="react-select" class="mb-3">
    <%= f.association :tags,
                as: :select,
                label: "Tags",
                selected: question.tags.map(&:id),
                input_html: {
                  class: "invisible form-control", multiple: true
                },
                collection: available_tags %>
  </div>


  <%= f.submit (question.new_record? ? :Submit : :Update),
               class: "btn btn-success",
               data: {
                 "disable-with": "Loading",
                 "form-target": "submit"
               } %>

  <%= tag.button :Unfreeze,
                 type: "submit",
                 form: "unfreeze",
                 class: "btn btn-primary",
                 data: { "disable-with": "Loading",
                 } if question.frozen? %>
  <%= tag.button :Delete, type: "submit", form: "delete", class: "btn btn-danger", data: { "disable-with" => "Loading" } if !question.new_record? %>
 <% end %>

<%= form_with url: update_state_question_path(question), id: "unfreeze", local: false do |f| %>
  <%= f.hidden_field :course_id, value: question.course.id %>
  <%= f.hidden_field :state, value: "unresolved" %>
<% end if !question.new_record? %>
<%= form_with url: question_path(question), id: "delete", method: :delete, local: false do |f| %>
  <%= f.hidden_field :course_id, value: question.course.id %>
  <%= f.hidden_field :state, value: "unresolved" %>
<% end if !question.new_record? %>


